window.confirmAro = () => {
            const targetId = document.getElementById('targetSelect').value;
            if(targetId) { window.currentOrder.target = window.masterNomadsDatabase.find(u => u.id_profilo === targetId); } 
            else { window.currentOrder.target = null; }
            
            // GENERAZIONE DINAMICA SECONDA META' DELL'ORDINE
            const container = document.getElementById('second-half-buttons-container');
            container.innerHTML = "";
            const firstAction = window.currentOrder.action;

            if (firstAction === 'MOVIMENTO') {
                // Se mi sono mosso per primo, posso fare quasi tutto come seconda metà
                container.innerHTML += `<button class="huge-btn" onclick="selectAction('ATTACCO BS')">ATTACCO BS <span>(Seconda Metà)</span></button>`;
                container.innerHTML += `<button class="huge-btn" onclick="goToModifiers('CORPO A CORPO')">CORPO A CORPO <span>(Seconda Metà)</span></button>`;
                container.innerHTML += `<button class="huge-btn" onclick="goToModifiers('HACKING')">HACKING <span>(Seconda Metà)</span></button>`;
                container.innerHTML += `<button class="huge-btn" onclick="goToModifiers('SCHIVATA')">SCHIVATA <span>(Dodge)</span></button>`;
                container.innerHTML += `<button class="huge-btn" style="border-color: #aaa;" onclick="goToStep('step-group')">MOVIMENTO <span>(Fine Attivazione)</span></button>`;
            } 
            else {
                // Se la prima metà è stata un attacco, un hack, ecc., la seconda metà PUÒ ESSERE SOLO MOVIMENTO
                container.innerHTML += `<button class="huge-btn" style="border-color: #aaa;" onclick="goToModifiers('${firstAction}')">MOVIMENTO <span>(Esegui Calcolo dell'Attacco)</span></button>`;
                container.innerHTML += `<p style="color:#aaa; text-align:center; font-size:14px; padding:10px;">Regole: Hai già dichiarato un'abilità di attacco/tiro nella prima metà dell'ordine. Puoi solo muoverti.</p>`;
            }

            goToStep('step-second-half');
        };
